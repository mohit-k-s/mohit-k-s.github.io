<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Testing on Mohit&#39;s Page</title>
    <link>https://mohit-k-s.github.io/tags/testing/</link>
    <description>Recent content in Testing on Mohit&#39;s Page</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    <managingEditor>mohit.bash@gmail.com (Mohit Kumar)</managingEditor>
    <webMaster>mohit.bash@gmail.com (Mohit Kumar)</webMaster>
    <copyright>Mohit Kumar</copyright>
    <lastBuildDate>Wed, 30 Jul 2025 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://mohit-k-s.github.io/tags/testing/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Test what you write</title>
      <link>https://mohit-k-s.github.io/blog/2025/test_what_you_write/</link>
      <pubDate>Wed, 30 Jul 2025 00:00:00 +0000</pubDate><author>mohit.bash@gmail.com (Mohit Kumar)</author>
      <guid>https://mohit-k-s.github.io/blog/2025/test_what_you_write/</guid>
      <description>&lt;p&gt;Yesterday , I noticed this weird error in logs.&lt;/p&gt;&#xA;&#xA;&#xA;&#xA;&#xA;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;2025-07-30 10:00:00.000 UTC [1] LOG:  operator does not exist: uuid = record at character 50&#xA;2025-07-30 10:00:00.000 UTC [1] LOG:  statement: SELECT (orders.id) FROM order WHERE orders = ($1, $2)&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;It was immediately clear this was a bug the query attempts to compare a column to a record, which is not valid syntax in Postgres using the &lt;code&gt;=&lt;/code&gt; operator.&lt;/p&gt;&#xA;&lt;p&gt;When I brought it up with the developers and QA responsible for the feature, they insisted it had been tested and was working as expected.&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>Yesterday , I noticed this weird error in logs.</p>





<pre tabindex="0"><code>2025-07-30 10:00:00.000 UTC [1] LOG:  operator does not exist: uuid = record at character 50
2025-07-30 10:00:00.000 UTC [1] LOG:  statement: SELECT (orders.id) FROM order WHERE orders = ($1, $2)</code></pre><p>It was immediately clear this was a bug the query attempts to compare a column to a record, which is not valid syntax in Postgres using the <code>=</code> operator.</p>
<p>When I brought it up with the developers and QA responsible for the feature, they insisted it had been tested and was working as expected.</p>
<p>This prompted me to take a closer look. My assumption was that the intent here was to check whether <code>orders</code> matched <em>any</em> of the values, which would require using the <code>IN</code> operator, like:</p>





<pre tabindex="0"><code>SELECT orders.id FROM order WHERE orders IN ($1, $2)</code></pre><p>Turns out they didn&rsquo;t expect multiple values and the use case only expected one entry in array , which of course will work fine. But the language in code was something that did expect array.</p>
<p>What was not clear to me is who is to blame?</p>
<p>Lessons learned:</p>
<ul>
<li>If your query supports only one value, enforce it.</li>
<li>If your query supports multiple values, use the right operator.</li>
<li>And most importantly: test what you write, especially with different shapes of input.</li>
</ul>
]]></content:encoded>
    </item>
  </channel>
</rss>
